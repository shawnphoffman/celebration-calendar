"use strict";(self.webpackChunkcelebration_calendar=self.webpackChunkcelebration_calendar||[]).push([[402],{4939:function(e,n,t){var a=t(1413),r=t(2791),s=t(3504),i=t(5248),l=t(184),o=(0,i.Z)("div")({name:"Wrapper",class:"w1qn7xxj"}),u=(0,i.Z)(s.rU)({name:"StyledButton",class:"szq9s8c"}),c=function(e){var n=!!e.to||!!e.href,t="submit"===e.type,r=n?s.rU:t?"button":"div";return(0,l.jsx)(o,{onClick:function(){},children:(0,l.jsx)(u,(0,a.Z)({as:r},e))})};n.Z=(0,r.memo)(c),t(9081)},9487:function(e,n,t){t.r(n),t.d(n,{default:function(){return Q}});var a,r=t(5861),s=t(7757),i=t.n(s),l=t(2791),o=t(1084),u=t(6661),c=t(9053),d=t(5248),v=t(4939),p=t(1321),f=t(885),m=t(408),h=new Uint8Array(16);function x(){if(!a&&!(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(h)}var g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var j=function(e){return"string"===typeof e&&g.test(e)},b=[],y=0;y<256;++y)b.push((y+256).toString(16).substr(1));var Z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(b[e[n+0]]+b[e[n+1]]+b[e[n+2]]+b[e[n+3]]+"-"+b[e[n+4]]+b[e[n+5]]+"-"+b[e[n+6]]+b[e[n+7]]+"-"+b[e[n+8]]+b[e[n+9]]+"-"+b[e[n+10]]+b[e[n+11]]+b[e[n+12]]+b[e[n+13]]+b[e[n+14]]+b[e[n+15]]).toLowerCase();if(!j(t))throw TypeError("Stringified UUID is invalid");return t};var C=function(e,n,t){var a=(e=e||{}).random||(e.rng||x)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n){t=t||0;for(var r=0;r<16;++r)n[t+r]=a[r];return n}return Z(a)},w=t(4490),k=t(184),S=(0,d.Z)("div")({name:"Instructions",class:"i1ekb68g"}),D=(0,d.Z)("div")({name:"ButtonWrapper",class:"bvn66f9"}),I=function(e){var n;try{n=new URL(e)}catch(t){return!1}return"http:"===n.protocol||"https:"===n.protocol},U=(0,d.Z)("div")({name:"Error",class:"e320bz1"}),L=(0,d.Z)("div")({name:"InputWrapper",class:"i151lpp7"}),R=(0,d.Z)("div")({name:"InputContainer",class:"ie6d4qj"}),T=(0,d.Z)("input")({name:"DateTimeInput",class:"ddgczyg"}),M=(0,d.Z)("textarea")({name:"TextArea",class:"t1q5rq0n"}),E=(0,d.Z)("input")({name:"TextInput",class:"t18exikk"}),O=(0,d.Z)("label")({name:"Label",class:"l1uuoyo9"}),A=(0,d.Z)("div")({name:"Wrapper",class:"w1a91lwz"}),q=function(e){var n=e.user,t=(0,l.useState)(""),a=(0,f.Z)(t,2),r=a[0],s=a[1],i=(0,l.useState)(C()),u=(0,f.Z)(i,2),c=u[0],d=u[1],p=(0,l.useState)(""),h=(0,f.Z)(p,2),x=h[0],g=h[1],j=(0,l.useState)(""),b=(0,f.Z)(j,2),y=b[0],Z=b[1],q=(0,l.useState)("My Events"),z=(0,f.Z)(q,2),N=z[0],V=z[1],W=(0,l.useState)((new Date).toISOString().substring(0,16)),F=(0,f.Z)(W,2),H=F[0],P=F[1],_=(0,l.useState)((new Date).toISOString().substring(0,16)),B=(0,f.Z)(_,2),$=B[0],G=B[1],J=(0,l.useState)(""),K=(0,f.Z)(J,2),Q=K[0],X=K[1],Y=(0,l.useState)(""),ee=(0,f.Z)(Y,2),ne=ee[0],te=ee[1],ae=(0,l.useState)(""),re=(0,f.Z)(ae,2),se=re[0],ie=re[1],le=(0,o.Wz)(),oe=(0,l.useMemo)((function(){return(0,m.iH)(le,"user-events/".concat(null===n||void 0===n?void 0:n.uid))}),[le,n]),ue=(0,o.gN)(oe,{}),ce=(0,l.useMemo)((function(){return"success"===(null===ue||void 0===ue?void 0:ue.status)&&null!==ue&&void 0!==ue&&ue.data&&null!==ue&&void 0!==ue&&ue.data?Object.values(ue.data).sort((function(e,n){var t=new Date(e.startDate),a=new Date(n.startDate),r=new Date(e.endDate),s=new Date(n.endDate);return t>a?1:t<a?-1:r>s?1:r<s?-1:e.summary>n.summary?1:e.summary<n.summary?-1:0})):null}),[null===ue||void 0===ue?void 0:ue.data,null===ue||void 0===ue?void 0:ue.status]),de=(0,l.useCallback)((function(e,t){var a=(0,m.iH)(le,"user-events/".concat(null===n||void 0===n?void 0:n.uid,"/").concat(e));(0,m.t8)(a,t)}),[le,null===n||void 0===n?void 0:n.uid]),ve=(0,l.useCallback)((function(){console.log(),d(C()),g(""),Z(""),V(""),P((new Date).toISOString().substring(0,16)),G((new Date).toISOString().substring(0,16)),X(""),te(""),ie(""),s("")}),[]),pe=(0,l.useCallback)((function(e){var n=e.target.value;g(n),s(n?null:"Missing title")}),[]),fe=(0,l.useCallback)((function(e){var n=e.target.value;Z(n)}),[]),me=(0,l.useCallback)((function(e){var n=e.target.value;V(n)}),[]),he=(0,l.useCallback)((function(e){var n=e.target.value;console.log({value:n}),P(n),s(n?null:"Missing start time")}),[]),xe=(0,l.useCallback)((function(e){var n=e.target.value;G(n),s(n?null:"Missing end time")}),[]),ge=(0,l.useCallback)((function(e){var n=e.target.value;I(n)?(s(null),X(n)):s("Invalid event URL")}),[]),je=(0,l.useCallback)((function(e){var n=e.target.value;te(n)}),[]),be=(0,l.useCallback)((function(e){var n=e.target.value;I(n)?(s(null),ie(n)):s("Invalid image URL")}),[]),ye=(0,l.useCallback)((function(){if(!r)if(x)if(N)if(H)if($)if(!Q||I(Q))if(!se||I(se)){var e={id:c,summary:x,description:null!==y&&void 0!==y?y:null,venue:N,timezoneStartAt:"America/Los_Angeles",startDate:H,endDate:$,startAt:new Date(H).toISOString(),endAt:new Date($).toISOString(),color:"var(--linkHover)",url:null!==Q&&void 0!==Q?Q:null,address:null!==ne&&void 0!==ne?ne:null,imageUrl:null!==se&&void 0!==se?se:null,type:"userEvent",private:!0};de(e.id,e),ve()}else s("Invalid image URL");else s("Invalid event URL");else s("Missing end time");else s("Missing start time");else s("Missing venue");else s("Missing title")}),[de,ne,y,$,r,ve,c,se,H,x,Q,N]),Ze=(0,l.useCallback)((function(e){d(e.id),g(e.summary),Z(e.description),V(e.venue),P(e.startDate),G(e.endDate),X(e.url),te(e.address),ie(e.imageUrl)}),[]);return(0,k.jsxs)(A,{children:[(0,k.jsx)(S,{children:"Custom events are private and not visible to other users."}),r&&(0,k.jsx)(U,{children:r}),!1,(0,k.jsxs)(L,{children:[(0,k.jsx)(O,{children:"Title*:"}),(0,k.jsx)(R,{children:(0,k.jsx)(E,{type:"text",placeholder:"Event title",onChange:pe,value:x})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(O,{children:"Description:"}),(0,k.jsx)(R,{children:(0,k.jsx)(M,{type:"text",placeholder:"Event description",onChange:fe,value:y})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(O,{children:"Venue*:"}),(0,k.jsx)(R,{children:(0,k.jsx)(E,{type:"text",placeholder:"Event venue",onChange:me,value:N})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(O,{children:"Start Time*:"}),(0,k.jsx)(R,{children:(0,k.jsx)(T,{type:"datetime-local",min:"2022-05-21T12:00",max:"2022-05-31T12:00",step:"300",onChange:he,value:H})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(O,{children:"End Time*:"}),(0,k.jsx)(R,{children:(0,k.jsx)(T,{type:"datetime-local",min:"2022-05-21T12:00",max:"2022-05-31T12:00",step:"300",onChange:xe,value:$})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(O,{children:"URL:"}),(0,k.jsx)(R,{children:(0,k.jsx)(E,{type:"text",placeholder:"URL with event info (e.g. https://starwars.com)",onChange:ge,value:Q})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(O,{children:"Physical Address:"}),(0,k.jsx)(R,{children:(0,k.jsx)(M,{type:"textarea",placeholder:"Address of the venue",onChange:je,value:ne})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(O,{children:"Image URL:"}),(0,k.jsx)(R,{children:(0,k.jsx)(E,{type:"text",placeholder:"Image URL to display (e.g. https://starwars.com/cool.png)",onChange:be,value:se})})]}),(0,k.jsxs)(D,{children:[(0,k.jsx)(v.Z,{as:"button",disabled:!!r,onClick:ye,children:"Save Event"}),(0,k.jsx)(v.Z,{as:"button",onClick:ve,children:"Clear Form"})]}),(0,k.jsx)("div",{children:ce&&Object.values(ce).map((function(e){return(0,k.jsx)(w.Z,{event:e,onEdit:Ze,forceOpen:!0},e.id)}))})]})},z=(0,l.memo)(q);t(6167);var N=(0,d.Z)("hr")({name:"Divider",class:"dixwx17"}),V=(0,d.Z)("div")({name:"Wrapper",class:"wzfou7k"}),W=(0,d.Z)("div")({name:"Username",class:"u1qme51q"}),F=(0,d.Z)("i")({name:"PhoneIcon",class:"p1n7hmeg"}),H=(0,d.Z)("div")({name:"PhoneNumber",class:"p1ikq4y4"}),P=(0,d.Z)("img")({name:"Avatar",class:"avbunth"}),_=function(e){var n=e.user,t=(0,o.aC)(),a=(0,l.useCallback)((function(){t.signOut().then((function(){u.j(p.Z.LogOut),console.log("signed out")}))}),[t]),r=(0,l.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.providerData[0])||void 0===e?void 0:e.providerId}),[null===n||void 0===n?void 0:n.providerData]),s=(0,l.useMemo)((function(){var e;return(null===n||void 0===n||null===(e=n.providerData[0])||void 0===e?void 0:e.photoURL)||(null===n||void 0===n?void 0:n.photoURL)}),[null===n||void 0===n?void 0:n.photoURL,null===n||void 0===n?void 0:n.providerData]);return(0,k.jsxs)(V,{children:["phone"===r?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(F,{className:"fa-solid fa-mobile-screen-button fa-beat"}),(0,k.jsx)(H,{children:n.providerData[0].phoneNumber})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(W,{children:n.displayName}),(0,k.jsx)(P,{className:"fa-beat",src:s,alt:"pfp"})]}),(0,k.jsx)("div",{children:(0,k.jsx)(v.Z,{onClick:a,children:"Logout"})}),(0,k.jsx)(N,{}),(0,k.jsx)(z,{user:n}),(0,k.jsx)(N,{})]})},B=(0,l.memo)(_);t(4888);var $=t(8923),G=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.j(p.Z.LogIn),t=new c.c4,e.next=4,(0,c.rh)(n,t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new c.lI("recaptcha-container",{callback:function(e){console.log({response:e}),(0,c.$g)(n,"+13176040325",t).then((function(e){console.log({confirmationResult:e}),e.confirm("123456").then((function(e){console.log({result:e})})).catch((function(e){console.log({error:e})}))})).catch((function(e){console.log({e:e})}))}},n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),K=function(){var e=(0,o.TS)(),n=e.status,t=e.data,a=(0,o.aC)(),s=(0,o.aF)().data;(0,l.useCallback)((0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(a);case 2:case"end":return e.stop()}}),e)}))),[a]);return"loading"===n?(0,k.jsx)($.Z,{}):!0===t.signedIn?(0,k.jsx)(B,{user:s}):(0,k.jsxs)("div",{children:[(0,k.jsxs)(v.Z,{onClick:function(){return G(a)},children:["Login with Twitter\xa0",(0,k.jsx)("i",{className:"fa-brands fa-twitter"})]}),!1,(0,k.jsx)("div",{id:"recaptcha-container"})]})},Q=(0,l.memo)(K)},9081:function(e,n,t){t.r(n),n.default={}},6167:function(e,n,t){t.r(n),n.default={}},4888:function(e,n,t){t.r(n),n.default={}}}]);
//# sourceMappingURL=402.39561d16.chunk.js.map