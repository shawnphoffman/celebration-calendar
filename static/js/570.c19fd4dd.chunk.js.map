{"version":3,"file":"static/js/570.c19fd4dd.chunk.js","mappings":"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","sources":["pages/FavoritesList.js","webpack://celebration-calendar/./src/pages/FavoritesList.js?3180"],"sourcesContent":["import { memo, useMemo } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { useDatabase, useDatabaseObjectData } from 'reactfire'\nimport { equalTo, orderByValue, query, ref } from 'firebase/database'\nimport { styled } from 'linaria/react'\n\nimport EventListItem from 'components/events/EventListItem'\nimport Loading from 'components/Loading'\nimport { PageTitle } from 'components/styles'\nimport { useEventContext } from 'context/EventContext'\n\nconst NoFavorites = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tflex: 0;\n\tmargin-top: 16px;\n\tfont-weight: bold;\n`\nconst Container = styled.div`\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\toverflow-x: hidden;\n\tbackground: var(--bg);\n\tborder-radius: 8px;\n\tflex-direction: column;\n\talign-items: center;\n`\nconst ScrollBox = styled.div`\n\twidth: 100%;\n\toverflow-y: scroll;\n\t::-webkit-scrollbar-corner {\n\t\tbackground: var(--transparent);\n\t}\n`\n\nconst Favorites = () => {\n\tconst [state] = useEventContext()\n\tconst { uid } = useParams()\n\tconst database = useDatabase()\n\n\t// ============================================================\n\n\t// Shared Favorites Query\n\tconst sharedFavQ = useMemo(() => {\n\t\tconst sharedFavRef = ref(database, `user-favorites/${uid}`)\n\t\tconst sharedFavQuery = query(sharedFavRef, orderByValue())\n\t\treturn query(sharedFavQuery, equalTo('true'))\n\t}, [database, uid])\n\n\t// Shared Favorites Resp\n\tconst sharedFavResp = useDatabaseObjectData(sharedFavQ, {})\n\n\t// Shared Favorites\n\tconst sharedFaveIds = useMemo(() => {\n\t\tif (sharedFavResp?.status !== 'success' || !sharedFavResp?.data) return []\n\t\treturn Object.keys(sharedFavResp?.data) || []\n\t}, [sharedFavResp?.data, sharedFavResp?.status])\n\n\t// ============================================================\n\n\t// Custom Events Ref\n\tconst customEventsRef = useMemo(() => {\n\t\treturn ref(database, `custom-events`)\n\t}, [database])\n\n\t// Custom Events Resp\n\tconst customEventsRep = useDatabaseObjectData(customEventsRef, {})\n\n\t// All Events\n\tconst customEvents = useMemo(() => {\n\t\tif (!state || !state.allEvents) return []\n\t\tif (customEventsRep?.status !== 'success' || !customEventsRep?.data) {\n\t\t\treturn []\n\t\t} else {\n\t\t\treturn Object.keys(customEventsRep.data).reduce((memo, curr) => {\n\t\t\t\tmemo = [...memo, ...Object.values(customEventsRep.data[curr])]\n\t\t\t\treturn memo\n\t\t\t}, [])\n\t\t}\n\t}, [customEventsRep.data, customEventsRep?.status, state])\n\n\t// ============================================================\n\n\tconst hasFavorites = useMemo(() => {\n\t\treturn !!sharedFaveIds.length && sharedFavResp?.status === 'success'\n\t}, [sharedFavResp?.status, sharedFaveIds.length])\n\n\tconst favorites = useMemo(() => {\n\t\tif (!state?.allEvents) return []\n\n\t\tconst savedFavorites = state.allEvents.filter(e => {\n\t\t\treturn sharedFaveIds.includes(e.id)\n\t\t})\n\n\t\tconst savedCustomEvents = customEvents.filter(e => {\n\t\t\treturn sharedFaveIds.includes(e.id)\n\t\t})\n\n\t\tconst rawFavorites = [...savedFavorites, ...savedCustomEvents]\n\n\t\treturn rawFavorites.sort((a, b) => {\n\t\t\tconst aStart = new Date(a.startDate)\n\t\t\tconst bStart = new Date(b.startDate)\n\t\t\tconst aEnd = new Date(a.endDate)\n\t\t\tconst bEnd = new Date(b.endDate)\n\t\t\tif (aStart > bStart) return 1\n\t\t\tif (aStart < bStart) return -1\n\t\t\tif (aEnd > bEnd) return 1\n\t\t\tif (aEnd < bEnd) return -1\n\t\t\tif (a.summary > b.summary) return 1\n\t\t\tif (a.summary < b.summary) return -1\n\t\t\treturn 0\n\t\t})\n\t}, [customEvents, sharedFaveIds, state.allEvents])\n\n\treturn (\n\t\t<Container>\n\t\t\t<PageTitle>Shared Favorites</PageTitle>\n\t\t\t<ScrollBox>\n\t\t\t\t{sharedFavResp?.status !== 'success' && <Loading />}\n\t\t\t\t{!hasFavorites && <NoFavorites>No favorites to display...</NoFavorites>}\n\t\t\t\t{favorites.map(event => (\n\t\t\t\t\t<EventListItem event={event} key={event.id} forceOpen />\n\t\t\t\t))}\n\t\t\t</ScrollBox>\n\t\t</Container>\n\t)\n}\n\nexport default memo(Favorites)\n","// extracted by mini-css-extract-plugin\nexport default {};"],"names":["NoFavorites","name","class","Container","ScrollBox","Favorites","useEventContext","state","uid","useParams","database","useDatabase","sharedFavQ","useMemo","sharedFavRef","ref","sharedFavQuery","query","orderByValue","equalTo","sharedFavResp","useDatabaseObjectData","sharedFaveIds","status","data","Object","keys","customEventsRef","customEventsRep","customEvents","allEvents","reduce","memo","curr","values","hasFavorites","length","favorites","savedFavorites","filter","e","includes","id","savedCustomEvents","sort","a","b","aStart","Date","startDate","bStart","aEnd","endDate","bEnd","summary","map","event","forceOpen"],"sourceRoot":""}