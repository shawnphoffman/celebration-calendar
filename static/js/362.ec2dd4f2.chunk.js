"use strict";(self.webpackChunkcelebration_calendar=self.webpackChunkcelebration_calendar||[]).push([[362],{4939:function(e,n,t){var a=t(1413),r=t(2791),s=t(3504),i=t(5248),l=t(184),o=(0,i.Z)("div")({name:"Wrapper",class:"w1qn7xxj"}),u=(0,i.Z)(s.rU)({name:"StyledButton",class:"szq9s8c"}),c=function(e){var n=!!e.to||!!e.href,t="submit"===e.type,r=n?s.rU:t?"button":"div";return(0,l.jsx)(o,{onClick:function(){},children:(0,l.jsx)(u,(0,a.Z)({as:r},e))})};n.Z=(0,r.memo)(c),t(9081)},9487:function(e,n,t){t.r(n),t.d(n,{default:function(){return Q}});var a,r=t(5861),s=t(7757),i=t.n(s),l=t(2791),o=t(1084),u=t(6661),c=t(9053),d=t(5248),v=t(4939),p=t(1321),f=t(885),m=t(408),h=new Uint8Array(16);function x(){if(!a&&!(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(h)}var g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var j=function(e){return"string"===typeof e&&g.test(e)},b=[],y=0;y<256;++y)b.push((y+256).toString(16).substr(1));var Z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(b[e[n+0]]+b[e[n+1]]+b[e[n+2]]+b[e[n+3]]+"-"+b[e[n+4]]+b[e[n+5]]+"-"+b[e[n+6]]+b[e[n+7]]+"-"+b[e[n+8]]+b[e[n+9]]+"-"+b[e[n+10]]+b[e[n+11]]+b[e[n+12]]+b[e[n+13]]+b[e[n+14]]+b[e[n+15]]).toLowerCase();if(!j(t))throw TypeError("Stringified UUID is invalid");return t};var C=function(e,n,t){var a=(e=e||{}).random||(e.rng||x)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n){t=t||0;for(var r=0;r<16;++r)n[t+r]=a[r];return n}return Z(a)},w=t(5337),k=t(184),D=(0,d.Z)("div")({name:"Instructions",class:"i1ekb68g"}),S=(0,d.Z)("div")({name:"ButtonWrapper",class:"bvn66f9"}),U=function(e){var n;try{n=new URL(e)}catch(t){return!1}return"http:"===n.protocol||"https:"===n.protocol},I=(0,d.Z)("div")({name:"Error",class:"e320bz1"}),L=(0,d.Z)("div")({name:"InputWrapper",class:"i151lpp7"}),R=(0,d.Z)("div")({name:"InputContainer",class:"ie6d4qj"}),T=(0,d.Z)("input")({name:"DateTimeInput",class:"ddgczyg"}),M=(0,d.Z)("textarea")({name:"TextArea",class:"t1q5rq0n"}),A=(0,d.Z)("input")({name:"TextInput",class:"t18exikk"}),E=(0,d.Z)("label")({name:"Label",class:"l1uuoyo9"}),q=(0,d.Z)("div")({name:"Wrapper",class:"w1a91lwz"}),z=function(e){var n=e.user,t=(0,l.useRef)(),a=(0,l.useState)(),r=(0,f.Z)(a,2),s=r[0],i=r[1],u=(0,l.useState)(),c=(0,f.Z)(u,2),d=c[0],p=c[1],h=(0,l.useState)(),x=(0,f.Z)(h,2),g=x[0],j=x[1],b=(0,l.useState)(),y=(0,f.Z)(b,2),Z=y[0],z=y[1],N=(0,l.useState)(),O=(0,f.Z)(N,2),W=O[0],V=O[1],F=(0,l.useState)(),H=(0,f.Z)(F,2),P=H[0],_=H[1],B=(0,l.useState)(),$=(0,f.Z)(B,2),G=$[0],J=$[1],K=(0,l.useState)(),Q=(0,f.Z)(K,2),X=Q[0],Y=Q[1],ee=(0,o.Wz)(),ne=(0,l.useMemo)((function(){return(0,m.iH)(ee,"user-events/".concat(null===n||void 0===n?void 0:n.uid))}),[ee,n]),te=(0,o.gN)(ne,{}),ae=(0,l.useMemo)((function(){return"success"===(null===te||void 0===te?void 0:te.status)&&null!==te&&void 0!==te&&te.data&&null!==te&&void 0!==te&&te.data?Object.values(te.data).sort((function(e,n){var t=new Date(e.startDate),a=new Date(n.startDate),r=new Date(e.endDate),s=new Date(n.endDate);return t>a?1:t<a?-1:r>s?1:r<s?-1:e.summary>n.summary?1:e.summary<n.summary?-1:0})):null}),[null===te||void 0===te?void 0:te.data,null===te||void 0===te?void 0:te.status]),re=(0,l.useCallback)((function(e,t){var a=(0,m.iH)(ee,"user-events/".concat(null===n||void 0===n?void 0:n.uid,"/").concat(e));(0,m.t8)(a,t)}),[ee,null===n||void 0===n?void 0:n.uid]),se=(0,l.useCallback)((function(){p(null),j(null),z(null),V(null),_(null),J(null),Y(null),i(null),t.current.reset()}),[]),ie=(0,l.useCallback)((function(e){var n=e.target.value;p(n),i(n?null:"Missing title")}),[]),le=(0,l.useCallback)((function(e){var n=e.target.value;j(n)}),[]),oe=(0,l.useCallback)((function(e){var n=e.target.value;z(n),i(n?null:"Missing start time")}),[]),ue=(0,l.useCallback)((function(e){var n=e.target.value;V(n),i(n?null:"Missing end time")}),[]),ce=(0,l.useCallback)((function(e){var n=e.target.value;U(n)?(i(null),_(n)):i("Invalid event URL")}),[]),de=(0,l.useCallback)((function(e){var n=e.target.value;J(n)}),[]),ve=(0,l.useCallback)((function(e){var n=e.target.value;U(n)?(i(null),Y(n)):i("Invalid image URL")}),[]),pe=(0,l.useCallback)((function(){if(!s)if(d)if(Z)if(W)if(!P||U(P))if(!X||U(X)){var e={id:C(),summary:d,description:null!==g&&void 0!==g?g:null,venue:"My Events",timezoneStartAt:"America/Los_Angeles",startDate:Z,endDate:W,startAt:new Date(Z).toISOString(),endAt:new Date(W).toISOString(),color:"var(--linkHover)",url:null!==P&&void 0!==P?P:null,address:null!==G&&void 0!==G?G:null,imageUrl:null!==X&&void 0!==X?X:null,type:"userEvent",private:!0};console.log({newEvent:e,title:d,description:g,startTime:Z,endTime:W,url:P,address:G,imageUrl:X}),re(e.id,e),se()}else i("Invalid image URL");else i("Invalid event URL");else i("Missing end time");else i("Missing start time");else i("Missing title")}),[re,G,g,W,s,se,X,Z,d,P]);return(0,k.jsxs)(q,{children:[(0,k.jsx)(D,{children:"Custom events are private and not visible to other users."}),s&&(0,k.jsx)(I,{children:s}),(0,k.jsxs)("form",{ref:t,children:[(0,k.jsxs)(L,{children:[(0,k.jsx)(E,{children:"Title*:"}),(0,k.jsx)(R,{children:(0,k.jsx)(A,{type:"text",placeholder:"Event title",onChange:ie})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(E,{children:"Description:"}),(0,k.jsx)(R,{children:(0,k.jsx)(M,{type:"text",placeholder:"Event description",onChange:le})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(E,{children:"Start Time*:"}),(0,k.jsx)(R,{children:(0,k.jsx)(T,{type:"datetime-local",min:"2022-05-23T12:00",max:"2022-05-31T12:00",step:"300",onChange:oe})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(E,{children:"End Time*:"}),(0,k.jsx)(R,{children:(0,k.jsx)(T,{type:"datetime-local",min:"2022-05-23T12:00",max:"2022-05-31T12:00",step:"300",onChange:ue})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(E,{children:"URL:"}),(0,k.jsx)(R,{children:(0,k.jsx)(A,{type:"text",placeholder:"URL with event info (e.g. https://starwars.com)",onChange:ce})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(E,{children:"Physical Address:"}),(0,k.jsx)(R,{children:(0,k.jsx)(M,{type:"textarea",placeholder:"Address of the venue",onChange:de})})]}),(0,k.jsxs)(L,{children:[(0,k.jsx)(E,{children:"Image URL:"}),(0,k.jsx)(R,{children:(0,k.jsx)(A,{type:"text",placeholder:"Image URL to display (e.g. https://starwars.com/cool.png)",onChange:ve})})]})]}),(0,k.jsxs)(S,{children:[(0,k.jsx)(v.Z,{as:"button",disabled:!!s,onClick:pe,children:"Save Event"}),(0,k.jsx)(v.Z,{as:"button",onClick:se,children:"Clear Form"})]}),(0,k.jsx)("div",{children:ae&&Object.values(ae).map((function(e){return(0,k.jsx)(w.Z,{event:e,forceOpen:!0},e.id)}))})]})},N=(0,l.memo)(z);t(6167);var O=(0,d.Z)("hr")({name:"Divider",class:"dixwx17"}),W=(0,d.Z)("div")({name:"Wrapper",class:"wzfou7k"}),V=(0,d.Z)("div")({name:"Username",class:"u1qme51q"}),F=(0,d.Z)("i")({name:"PhoneIcon",class:"p1n7hmeg"}),H=(0,d.Z)("div")({name:"PhoneNumber",class:"p1ikq4y4"}),P=(0,d.Z)("img")({name:"Avatar",class:"avbunth"}),_=function(e){var n=e.user,t=(0,o.aC)(),a=(0,l.useCallback)((function(){t.signOut().then((function(){u.j(p.Z.LogOut),console.log("signed out")}))}),[t]),r=(0,l.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.providerData[0])||void 0===e?void 0:e.providerId}),[null===n||void 0===n?void 0:n.providerData]),s=(0,l.useMemo)((function(){var e;return(null===n||void 0===n||null===(e=n.providerData[0])||void 0===e?void 0:e.photoURL)||(null===n||void 0===n?void 0:n.photoURL)}),[null===n||void 0===n?void 0:n.photoURL,null===n||void 0===n?void 0:n.providerData]);return(0,k.jsxs)(W,{children:["phone"===r?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(F,{className:"fa-solid fa-mobile-screen-button fa-beat"}),(0,k.jsx)(H,{children:n.providerData[0].phoneNumber})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(V,{children:n.displayName}),(0,k.jsx)(P,{className:"fa-beat",src:s,alt:"pfp"})]}),(0,k.jsx)("div",{children:(0,k.jsx)(v.Z,{onClick:a,children:"Logout"})}),(0,k.jsx)(O,{}),(0,k.jsx)(N,{user:n}),(0,k.jsx)(O,{})]})},B=(0,l.memo)(_);t(4888);var $=t(8923),G=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.j(p.Z.LogIn),t=new c.c4,e.next=4,(0,c.rh)(n,t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=(0,r.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new c.lI("recaptcha-container",{callback:function(e){console.log({response:e}),(0,c.$g)(n,"+13176040325",t).then((function(e){console.log({confirmationResult:e}),e.confirm("123456").then((function(e){console.log({result:e})})).catch((function(e){console.log({error:e})}))})).catch((function(e){console.log({e:e})}))}},n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),K=function(){var e=(0,o.TS)(),n=e.status,t=e.data,a=(0,o.aC)(),s=(0,o.aF)().data;(0,l.useCallback)((0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(a);case 2:case"end":return e.stop()}}),e)}))),[a]);return"loading"===n?(0,k.jsx)($.Z,{}):!0===t.signedIn?(0,k.jsx)(B,{user:s}):(0,k.jsxs)("div",{children:[(0,k.jsxs)(v.Z,{onClick:function(){return G(a)},children:["Login with Twitter\xa0",(0,k.jsx)("i",{className:"fa-brands fa-twitter"})]}),!1,(0,k.jsx)("div",{id:"recaptcha-container"})]})},Q=(0,l.memo)(K)},9081:function(e,n,t){t.r(n),n.default={}},6167:function(e,n,t){t.r(n),n.default={}},4888:function(e,n,t){t.r(n),n.default={}}}]);
//# sourceMappingURL=362.ec2dd4f2.chunk.js.map