"use strict";(self.webpackChunkcelebration_calendar=self.webpackChunkcelebration_calendar||[]).push([[603],{9719:function(t,e,n){n.d(e,{Y:function(){return h}});var o=n(2982),r=n(885),s=n(2791),u=n(1084),i=n(408),a=n(703),c=n(184),l="SWC.FavoriteVendors",d={favorites:[],toggleFavorite:function(){}},v=(0,s.createContext)(d),f=function(t){var e=t.children,n=(0,a.Z)(l,[]),d=(0,r.Z)(n,2),f=d[0],h=d[1],g=(0,u.TS)(),E=g.status,A=g.data,I=(0,u.aF)().data,p=(0,u.Wz)(),O=(0,s.useMemo)((function(){var t=(0,i.iH)(p,"user-favorite-vendors/".concat(null===I||void 0===I?void 0:I.uid)),e=(0,i.IO)(t,(0,i.Bd)());return(0,i.IO)(e,(0,i.EW)("true"))}),[p,I]),T=(0,u.gN)(O,{}),m=(0,s.useMemo)((function(){return"success"===(null===T||void 0===T?void 0:T.status)&&null!==T&&void 0!==T&&T.data&&Object.keys(null===T||void 0===T?void 0:T.data)||[]}),[null===T||void 0===T?void 0:T.data,null===T||void 0===T?void 0:T.status]),R=(0,s.useCallback)((function(t,e){if("success"===E&&null!==A&&void 0!==A&&A.signedIn){var n=(0,i.iH)(p,"user-favorite-vendors/".concat(null===I||void 0===I?void 0:I.uid,"/").concat(t));(0,i.t8)(n,e?"true":null),console.log("UPDATING FIREBASE WITH FAVORITE")}else{var r=JSON.parse(localStorage.getItem(l)||"[]");e?(console.log("ADDING NEW FAVORITE TO STORAGE"),h([].concat((0,o.Z)(r),[t]))):(console.log("REMOVING FAVORITE FROM STORAGE"),h(r.filter((function(e){return e!==t}))))}}),[p,h,null===A||void 0===A?void 0:A.signedIn,E,null===I||void 0===I?void 0:I.uid]);(0,s.useEffect)((function(){"success"===E&&null!==A&&void 0!==A&&A.signedIn&&"success"===T.status&&(console.log("FIREBASE CHANGED. UPDATING STORAGE"),h(m))}),[h,null===A||void 0===A?void 0:A.signedIn,E,T.status,m]);var S=(0,s.useMemo)((function(){return{favorites:f,toggleFavorite:R}}),[f,R]);return(0,c.jsx)(v.Provider,{value:S,children:e})},h=function(){return(0,s.useContext)(v)};e.Z=(0,s.memo)(f)},248:function(t,e,n){n.d(e,{yM:function(){return f}});var o=n(885),r=n(1413),s=n(2791),u=n(8104),i=n(184),a=(0,s.createContext)(),c="SET_VENDORS",l={allVendors:[],allTattoos:[]},d=function(t,e){return e.type===c?t.allVendors.length>0?t:(0,r.Z)((0,r.Z)({},t),{},{allVendors:e.vendors,allTattoos:e.tattooArtists}):t},v=function(t){var e=t.children,r=(0,s.useReducer)(d,l),v=(0,o.Z)(r,2),f=v[0],h=v[1];return(0,s.useEffect)((function(){fetch("https://api-melupufoagt.stackpathdns.com/api/space_orders?specials=1&key=f4da60d9-7791-4d31-aaf0-5cce46bf1e5d&category=13359").then((function(t){return t.json()})).then((function(t){var e=(0,u.l0)(t),n=e.vendors,o=e.tattooArtists;h({type:c,vendors:n,tattooArtists:o})})).catch((function(t){n.e(213).then(n.t.bind(n,3213,19)).then((function(t){var e=(0,u.l0)(t),n=e.vendors,o=e.tattooArtists;h({type:c,vendors:n,tattooArtists:o})}))}))}),[]),(0,i.jsx)(a.Provider,{value:[f,h],children:e})},f=function(){return(0,s.useContext)(a)};e.ZP=(0,s.memo)(v)},5603:function(t,e,n){n.r(e);var o=n(2791),r=n(9719),s=n(248),u=n(184),i=(0,o.lazy)((function(){return Promise.all([n.e(137),n.e(581)]).then(n.bind(n,6581))})),a=function(){return(0,u.jsx)(s.ZP,{children:(0,u.jsx)(r.Z,{children:(0,u.jsx)(i,{})})})};e.default=(0,o.memo)(a)}}]);
//# sourceMappingURL=603.1e2403c2.chunk.js.map